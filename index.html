<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <title>Pig headüê∑</title>

  <!-- üîî Notiflix -->
  <script src="https://cdn.jsdelivr.net/npm/notiflix@3.2.6/dist/notiflix-aio-3.2.6.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notiflix@3.2.6/dist/notiflix-3.2.6.min.css"/>

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #ffb6c1, #ff69b4);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 20px;
    }
    h1 {
      margin-top: 10px;
      font-size: 2rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .container {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 20px;
      padding: 20px;
      width: 100%;
      max-width: 420px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    input, button {
      font-size: 1rem;
      border: none;
      outline: none;
      border-radius: 10px;
      padding: 10px 15px;
    }
    button {
      background-color: #ff4fa3;
      color: white;
      margin: 5px;
      transition: 0.2s;
      cursor: pointer;
    }
    button:hover {
      background-color: #ff2c8b;
      transform: scale(1.05);
    }
    .player-list {
      margin: 10px 0;
      text-align: left;
    }
    .player {
      display: flex;
      justify-content: space-between;
      margin: 4px 0;
      font-weight: bold;
    }
    .active {
      color: #fff;
      text-shadow: 0 0 5px #fff;
    }
    .winner {
      font-size: 1.2rem;
      font-weight: bold;
      color: #fff;
      background: rgba(255,255,255,0.2);
      padding: 10px;
      border-radius: 10px;
      margin-top: 10px;
    }
    footer {
      margin-top: auto;
      padding: 10px;
      font-size: 0.9rem;
      opacity: 0.8;
      text-align: center;
    }
    footer a {
      color: #fff;
      text-decoration: none;
      font-weight: bold;
    }
    footer a:hover {
      text-decoration: underline;
    }
    @media (max-width: 480px) {
      h1 { font-size: 1.5rem; }
      .container { padding: 15px; }
      button { padding: 8px 10px; font-size: 0.9rem; }
    }
  </style>
</head>
<body>
  <h1>Pig headüê∑</h1>
  <div class="container">
    <div id="setup">
      <input type="text" id="playerName" placeholder="Nome do jogador" />
      <button onclick="addPlayer()">Adicionar</button>
      <div class="player-list" id="playerList"></div>
      <button onclick="startGame()" id="startBtn">Iniciar Jogo</button>
    </div>

    <div id="game" style="display:none;">
      <h2 id="turnInfo"></h2>
      <p>Pontos da rodada: <span id="roundScore">0</span></p>
      <div>
        <button onclick="addPoints(1)">+1</button>
        <button onclick="addPoints(5)">+5</button>
        <button onclick="addPoints(10)">+10</button>
        <button onclick="addPoints(20)">+20</button>
      </div>
      <div>
        <button onclick="hold()">‚úã Parar</button>
        <button onclick="resetRound()">üî• Zerar rodada</button>
        <button onclick="resetCurrentPlayer()">‚ùå Zerar jogador</button>
        <button onclick="resetGame()">üí£ Zerar tudo</button>
      </div>
      <div class="player-list" id="scoreboard"></div>
      <div class="winner" id="winnerMsg"></div>
    </div>
  </div>

  <footer>
    Desenvolvido por <a href="https://www.linkedin.com/in/wallace-barbosa-1a7488328/" target="_blank">Barbosasw</a>
  </footer>

  <script>
    let players = [];
    let currentPlayer = 0;
    let roundScore = 0;
    let gameActive = false;

    // üîß Configura√ß√£o do Notiflix para combinar com o tema
    Notiflix.Confirm.init({
      titleColor: '#ff4fa3',
      okButtonBackground: '#ff4fa3',
      cancelButtonBackground: '#999',
      borderRadius: '12px',
      width: '280px',
      messageColor: '#333',
    });

    // üîÑ Salvar estado no localStorage
    function saveState() {
      const state = { players, currentPlayer, roundScore, gameActive };
      localStorage.setItem("pig_game_state", JSON.stringify(state));
    }

    // üîÅ Carregar estado salvo
    function loadState() {
      const saved = localStorage.getItem("pig_game_state");
      if (saved) {
        const state = JSON.parse(saved);
        players = state.players || [];
        currentPlayer = state.currentPlayer || 0;
        roundScore = state.roundScore || 0;
        gameActive = state.gameActive || false;

        if (players.length > 0) {
          document.getElementById("setup").style.display = "none";
          document.getElementById("game").style.display = "block";
          updateUI();
        }
      }
    }

    function addPlayer() {
      const nameInput = document.getElementById("playerName");
      const name = nameInput.value.trim();
      if (name) {
        players.push({ name, total: 0 });
        nameInput.value = "";
        renderPlayerList();
        saveState();
      }
    }

    function renderPlayerList() {
      const list = document.getElementById("playerList");
      list.innerHTML = players.map((p, i) => `${i+1}. ${p.name}`).join("<br>");
    }

    function startGame() {
      if (players.length < 2) {
        Notiflix.Notify.failure("Adicione pelo menos 2 jogadores!");
        return;
      }
      gameActive = true;
      document.getElementById("setup").style.display = "none";
      document.getElementById("game").style.display = "block";
      updateUI();
      saveState();
    }

    function addPoints(points) {
      if (!gameActive) return;
      roundScore += points;
      updateUI();
      saveState();
    }

    function hold() {
      if (!gameActive) return;
      players[currentPlayer].total += roundScore;
      if (players[currentPlayer].total >= 100) {
        document.getElementById("winnerMsg").textContent =
          `${players[currentPlayer].name} venceu com ${players[currentPlayer].total} pontos! üéâ`;
        gameActive = false;
        Notiflix.Report.success('üèÜ Vit√≥ria!', `${players[currentPlayer].name} venceu o jogo!`, 'OK');
      } else {
        roundScore = 0;
        nextPlayer();
      }
      updateUI();
      saveState();
    }

    function resetRound() {
      roundScore = 0;
      nextPlayer();
      updateUI();
      saveState();
    }

    function resetCurrentPlayer() {
      const playerName = players[currentPlayer].name;
      Notiflix.Confirm.show(
        'Zerar Jogador',
        `Deseja zerar os pontos de ${playerName}?`,
        'Sim',
        'N√£o',
        () => {
          players[currentPlayer].total = 0;
          roundScore = 0;
          updateUI();
          saveState();
          Notiflix.Notify.info(`${playerName} teve os pontos zerados.`);
        }
      );
    }

    function resetGame() {
      Notiflix.Confirm.show(
        'Zerar Tudo',
        'Tem certeza que deseja zerar todos os pontos?',
        'Sim',
        'Cancelar',
        () => {
          players.forEach(p => p.total = 0);
          roundScore = 0;
          currentPlayer = 0;
          gameActive = true;
          document.getElementById("winnerMsg").textContent = "";
          updateUI();
          saveState();
          Notiflix.Notify.success("Todos os pontos foram zerados!");
        }
      );
    }

    function nextPlayer() {
      currentPlayer = (currentPlayer + 1) % players.length;
      roundScore = 0;
    }

    function updateUI() {
      const turnInfo = document.getElementById("turnInfo");
      const roundDisplay = document.getElementById("roundScore");
      const scoreboard = document.getElementById("scoreboard");

      turnInfo.textContent = `Vez de: ${players[currentPlayer].name}`;
      roundDisplay.textContent = roundScore;

      scoreboard.innerHTML = players
        .map((p, i) => `
          <div class="player ${i === currentPlayer ? 'active' : ''}">
            <span>${p.name}</span>
            <span>${p.total}</span>
          </div>
        `)
        .join("");
    }

    // üß† Ao carregar a p√°gina, tenta restaurar o jogo
    window.addEventListener("load", loadState);
  </script>
</body>
</html>